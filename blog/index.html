---
layout: internal
title: titles.blog
---

<div class="container-fluid bg-body-tertiary py-4">
    <div class="container">
      <h1 class="text-body fw-bold">{% t titles.blog %}</h1>
    </div>
</div>

<div class="container-fluid">
    <div id="posts" class="container py-5">
        <!-- Category Filter -->
        {% assign all_categories = site.blog | map: "category" | compact | uniq | sort %}
        {% if all_categories.size > 0 %}
        <div class="d-flex flex-wrap gap-2 mb-4">
          <button class="btn btn-primary btn-sm blog-filter active" data-category="all">
            {% t blog.categories.all %}
          </button>
          {% for cat in all_categories %}
          <button class="btn btn-outline-secondary btn-sm blog-filter" data-category="{{ cat }}">
            {% case cat %}
              {% when 'release' %}{% t blog.categories.release %}
              {% when 'project' %}{% t blog.categories.project %}
              {% when 'community' %}{% t blog.categories.community %}
              {% when 'tutorial' %}{% t blog.categories.tutorial %}
              {% else %}{{ cat | capitalize }}
            {% endcase %}
          </button>
          {% endfor %}
        </div>
        {% endif %}

        <div class="row">
                {% for blog in site.blog reversed %}
                {% if blog.unlisted != true %}
                    <div class="col-12 col-md-4 mb-4 d-flex blog-post" data-category="{{ blog.category | default: 'uncategorized' }}">
                      <div class="card highlight-card position-relative p-4" dir="ltr">
                        <a class="stretched-link" href="{{ site.baseurl }}{{ blog.url | replace:'.html','' }}"></a>
                          {% assign img_path = blog.image | default: "2020/default.png" %}
                          {% assign img_ext = img_path | split: "." | last %}
                          {% assign img_base = img_path | remove: "." | remove: img_ext %}
                          {% assign thumb_path = img_base | append: "-thumb." | append: img_ext %}
                          <img src="/assets/images/blog/{{ img_path }}"
                               srcset="/assets/images/blog/{{ thumb_path }} 400w, /assets/images/blog/{{ img_path }} 800w"
                               sizes="(max-width: 768px) 100vw, 400px"
                               loading="lazy"
                               alt="{{ blog.title }}" />
                          {% if blog.category %}
                          <span class="badge bg-secondary position-absolute top-0 end-0 m-3">
                            {% case blog.category %}
                              {% when 'release' %}{% t blog.categories.release %}
                              {% when 'project' %}{% t blog.categories.project %}
                              {% when 'community' %}{% t blog.categories.community %}
                              {% when 'tutorial' %}{% t blog.categories.tutorial %}
                              {% else %}{{ blog.category | capitalize }}
                            {% endcase %}
                          </span>
                          {% endif %}
                          <h3 class="fw-bold pt-4">{{ blog.title }}</h3>
                          <p class="mb-4">{{ blog.excerpt | strip_html | truncate: 100 }}</p>
                          <div class="position-absolute bottom-0">
                            <p class="text-muted">{% t blog.posted %}
                                {% capture month %}{{ blog.date | date: "%b" }}{% endcapture %}
                                {% t month.{{ month }} %} {{ blog.date | date: "%-d, %Y"}}
                            </p>
                          </div>
                      </div>
                    </div>
                {% endif %}
                {% endfor %}
        </div>
    </div>
</div>

<script>
(function() {
  'use strict';
  
  var handlersAttached = false;

  function filterPosts(category) {
    var posts = document.querySelectorAll('#posts .blog-post');
    posts.forEach(function(post) {
      var postCategory = post.getAttribute('data-category');
      if (category === 'all' || postCategory === category) {
        post.style.display = '';
        post.classList.remove('d-none');
      } else {
        post.style.display = 'none';
        post.classList.add('d-none');
      }
    });
  }

  function updateActiveButton(clickedBtn) {
    var filters = document.querySelectorAll('#posts .blog-filter');
    filters.forEach(function(btn) {
      btn.classList.remove('active', 'btn-primary');
      btn.classList.add('btn-outline-secondary');
    });
    clickedBtn.classList.add('active', 'btn-primary');
    clickedBtn.classList.remove('btn-outline-secondary');
  }

  function initBlogFilter() {
    var container = document.getElementById('posts');
    if (!container) return;
    
    var filters = container.querySelectorAll('.blog-filter');
    if (filters.length === 0) return;

    // Only attach handlers once
    if (handlersAttached) return;
    handlersAttached = true;

    // Use event delegation on the container
    container.addEventListener('click', function(e) {
      var btn = e.target.closest('.blog-filter');
      if (!btn) return;
      
      e.preventDefault();
      e.stopPropagation();
      
      var category = btn.getAttribute('data-category');
      updateActiveButton(btn);
      filterPosts(category);
    });
  }

  // Initialize immediately or on DOM ready
  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', initBlogFilter);
  } else {
    initBlogFilter();
  }
  
  // Handle View Transitions API - reset handler flag when page becomes visible again
  document.addEventListener('pageshow', function(event) {
    if (event.persisted) {
      handlersAttached = false;
      initBlogFilter();
    }
  });
})();
</script>
